import"./index-i4XY-n0d.js";import{V as u}from"./vitel-C_V1he1T.js";import{c as g,f as a,o as y}from"./vue.esm-bundler-TYCfHD9-.js";import{_ as f}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as h}from"./entry-preview-DsY0GTd9.js";import"./isArrayLike-DYVE1Yub.js";import"./isObjectLike-Dipz0mOK.js";import"./isArray-Dxzbedgu.js";const c={name:"$loader",data(){return{isLoading:!1,caption:null,loaders:new Set,loadingEl:null}},props:{app:{type:Object,required:!0},defaultCaption:{type:String,default:"Loading..."}},methods:{start(t){let e={id:"global",caption:"",...t};this.loaders.add(e.id),this.refresh(),e.caption&&this.updateCaption(e.caption)},updateCaption(t){this.loadingEl.querySelector(".loading-caption").innerText=t||this.defaultCaption},stop(t){let e={id:"global",...t};this.loaders.delete(e.id),this.refresh()},refresh(){this.isLoading=this.loaders.size>0,document.body.classList.toggle("loading",this.isLoading)}},created(){this.loadingEl=document.createElement("div"),this.loadingEl.id="global-loader",this.loadingEl.innerHTML=['<div class="loading-spinner">','<div class="fingerprint-spinner">','<div class="spinner-ring"></div>'.repeat(9),"</div>",'<div class="loading-caption">Loading...</div>',"</div>"].join(`
`),document.body.appendChild(this.loadingEl);let t=document.createElement("style");t.innerText=["body:not(.loading) #global-loader {","display: none;","}","body.loading #global-loader {","display: flex;","}","#global-loader {","display: flex;","align-items: center;","justify-content: center;","position: fixed;","top: 0px;","right: 0px;","bottom: 0px;","left: var(--sidebar-width);","z-index: 1;","background: var(--bs-body-bg);","position: fixed;","top: 0px;","left: 0px;","bottom: 0px;","right: 0px;","}"].join(`
`),document.body.appendChild(t);let e=this;this.app.mixin({created(){let s=this;this.$loader={...this.$mainLoader,start(n){return e.start({id:s.$.uid,caption:n})},stop(n){return e.stop({id:n||s.$.uid})}}}})}};c.__docgenInfo={exportName:"default",displayName:"loader",type:1,props:[{name:"defaultCaption",global:!1,description:"Default loading caption",tags:[{name:"type",text:"{String}"}],required:!1,type:"string",declarations:[],schema:"string",default:'"Loading..."'},{name:"key",global:!0,description:"",tags:[],required:!1,type:"PropertyKey",declarations:[],schema:{kind:"enum",type:"PropertyKey",schema:["string","number","symbol"]}},{name:"ref",global:!0,description:"",tags:[],required:!1,type:"VNodeRef",declarations:[],schema:{kind:"enum",type:"VNodeRef",schema:["string","Ref<any, any>",{kind:"event",type:"(ref: Element | ComponentPublicInstance<{}, {}, {}, {}, {}, {}, {}, {}, false, ComponentOptionsBase<any, any, any, any, any, any, any, any, any, {}, {}, string, {}, {}, {}, string, ComponentProvideOptions>, ... 4 more ..., any>, refs: Record<...>): void"}]}},{name:"ref_for",global:!0,description:"",tags:[],required:!1,type:"boolean",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"ref_key",global:!0,description:"",tags:[],required:!1,type:"string",declarations:[],schema:"string"},{name:"class",global:!0,description:"",tags:[],required:!1,type:"unknown",declarations:[],schema:"unknown"},{name:"style",global:!0,description:"",tags:[],required:!1,type:"unknown",declarations:[],schema:"unknown"},{name:"app",global:!1,description:"Main VueApp instance to decorate",tags:[{name:"type",text:"{VueApp}"}],required:!0,type:"Record<string, any>",declarations:[],schema:"Record<string, any>"}],events:[],slots:[],exposed:[{name:"defaultCaption",type:"string",description:"Default loading caption",declarations:[],schema:"string"},{name:"app",type:"Record<string, any>",description:"Main VueApp instance to decorate",declarations:[],schema:"Record<string, any>"},{name:"isLoading",type:"boolean",description:"Global loading state",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"caption",type:"any",description:"Most recent loading caption to display",declarations:[],schema:"any"},{name:"loaders",type:"Set<unknown> & Omit<Set<unknown>, keyof Set<any>>",description:"Object lookup of active loaders by ID",declarations:[],schema:{kind:"object",type:"Set<unknown> & Omit<Set<unknown>, keyof Set<any>>"}},{name:"loadingEl",type:"any",description:"DOM element for the main loading wrapper",declarations:[],schema:"any"}],sourceFiles:"/home/runner/work/Vitel/Vitel/services/loader.vue"};const m={methods:{testLoader(t){this.$loader.start(t),setTimeout(()=>this.$loader.stop(),3e3)}}},b={class:"card mb-2"},k={class:"card-body"},v={class:"list-group"};function x(t,e,s,n,w,i){return y(),g("div",null,[a("div",b,[e[4]||(e[4]=a("div",{class:"card-header"},"$loader methods",-1)),a("div",k,[e[3]||(e[3]=a("p",null,`General "I'm doing something" loader that locks the UI`,-1)),a("div",v,[a("a",{onClick:e[0]||(e[0]=r=>i.testLoader()),class:"list-group-item list-group-item-action"},"$toast.start() (for 3 seconds)"),a("a",{onClick:e[1]||(e[1]=r=>i.testLoader({caption:"Doing something"})),class:"list-group-item list-group-item-action"},"$toast.start({caption: 'Doing something'}) (for 3 seconds)"),a("a",{onClick:e[2]||(e[2]=r=>t.$loader.start()),class:"list-group-item list-group-item-action"},"$toast.start() (lock UI)")])])])])}const $=f(m,[["render",x]]);m.__docgenInfo={exportName:"default",displayName:"loader.demo",type:1,props:[{name:"key",global:!0,description:"",tags:[],required:!1,type:"PropertyKey",declarations:[],schema:{kind:"enum",type:"PropertyKey",schema:["string","number","symbol"]}},{name:"ref",global:!0,description:"",tags:[],required:!1,type:"VNodeRef",declarations:[],schema:{kind:"enum",type:"VNodeRef",schema:["string","Ref<any, any>",{kind:"event",type:"(ref: Element | ComponentPublicInstance<{}, {}, {}, {}, {}, {}, {}, {}, false, ComponentOptionsBase<any, any, any, any, any, any, any, any, any, {}, {}, string, {}, {}, {}, string, ComponentProvideOptions>, ... 4 more ..., any>, refs: Record<...>): void"}]}},{name:"ref_for",global:!0,description:"",tags:[],required:!1,type:"boolean",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"ref_key",global:!0,description:"",tags:[],required:!1,type:"string",declarations:[],schema:"string"},{name:"class",global:!0,description:"",tags:[],required:!1,type:"unknown",declarations:[],schema:"unknown"},{name:"style",global:!0,description:"",tags:[],required:!1,type:"unknown",declarations:[],schema:"unknown"}],events:[],slots:[],exposed:[],sourceFiles:"/home/runner/work/Vitel/Vitel/services/loader.demo.vue"};h(t=>{t.use(u),t.service("$loader",c)});const O={title:"Services/Loader",component:$,tags:["autodocs"],argTypes:{}},o={};var l,d,p;o.parameters={...o.parameters,docs:{...(l=o.parameters)==null?void 0:l.docs,source:{originalSource:"{}",...(p=(d=o.parameters)==null?void 0:d.docs)==null?void 0:p.source}}};const I=["Example"];export{o as Example,I as __namedExportsOrder,O as default};
